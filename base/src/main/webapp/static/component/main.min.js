requirejs.config({baseUrl:"/static/component/"});define("http",function(){var c=function(h){this._url=h;this._params={};this._success=function(){};this._error=function(){};this._method="GET";this._async=true};c.prototype.params=function(h,i){if(arguments.length==1&&typeof(h)=="object"){this._params=$.extend(this._params,h)}else{if(typeof(h)=="string"&&typeof(i)=="string"){this.params({key:i})}}return this};c.prototype.async=function(h){this._async=!!h};c.prototype.success=function(h){this._success=h;return this};c.prototype.error=function(h){this._error=h;return this};c.prototype.go=function(){var h=this;$.ajax(h._url,{type:h._method,data:h._params,dataType:"json",async:h._async,error:h._error,success:h._success});return this};c.prototype.method=function(h){this._method=h;return this};var g=function(h){this._url=h};g.prototype=new c().method("GET");var b=function(h){this._url=h};b.prototype=new c().method("POST");var f=function(h){this._url=h};f.prototype=new c().method("POST").params("_method","put");var e=function(h){this._url=h};e.prototype=new c().method("POST").params("_method","delete");var d=function(h){this._url=h};d.prototype=new c().method("PATCH").params("_method","patch");var a={Get:function(h){return new g(h)},Post:function(h){return new b(h)},Put:function(h){return new f(h)},Delete:function(h){return new e(h)},Patch:function(h){return new d(h)}};return a});define("tree",function(){return function(c){c.addClass("ztree");var g=window[c.data("back")],f=window[c.data("filter")],b=window[c.data("oncheck")],e=c.data("check"),a=[],d=c.data("datasource");setting={view:{showIcon:false},data:{simpleData:{pIdKey:"parentId",enable:true}},callback:{}};if(e){setting.check={enable:true}}if(b){setting.callback.onCheck=b}if(g){setting.callback.onClick=function(h,j,i){g({id:i.id,name:i.name})}}$.getJSON(d,{},function(j){if(j.status==0){var h=j.result;if(f){for(var i=0;i<h.length;i++){h[i]=f(h[i])}}$.fn.zTree.init(c,setting,h).expandAll(true)}})}});define("org.view",["config"],function(a){return function(b){var c=b.data("id");var d=function(e){b.text(e)};$.getJSON(a.dataSource["org-view"].replace("{{id}}",c),{},function(f){if(f.status==0){var e=f.result;d(e.name)}})}});define("org.tree",["config","tree"],function(b,a){return function(c){c.data("datasource",b.dataSource.org);a(c)}});define("org",["config"],function(a){return function(b){var d=b.data("back");var h=window[d];var i=[];var c=[];var e="";var g=function(){e=b.data("default");if(e!=null&&e!=""){c=e.split(",");for(var j=0;j<c.length;j++){$.getJSON("/sys/org/"+c[j]+".do?simple=true",{},function(k){if(k.status==0){i.push({id:k.result.id,name:k.result.name})}})}}};var f=function(){g();var k=$.dialog({title:"请选择组织",content:"<ul id='v_com_base_org_tree' class='orgTree ztree'></ul>",width:200,max:false,min:false,height:300,ok:function(){var m=$.fn.zTree.getZTreeObj("v_com_base_org_tree");h(i);var l=[];for(var n=0;n<i.length;n++){l.push(i[n].id)}b.data("default",l.join(","));i=[]}});$("#v_com_base_org_tree").parent().parent().attr("valign","top").css("text-align","left");var j={check:{enable:true},view:{showIcon:false},data:{simpleData:{pIdKey:"parentId",enable:true}},callback:{"onCheck":function(n,p,o){if(o.checked){i.push({id:o.id,name:o.name})}else{var m=[];for(var l=0;l<i.length;l++){if(i[l].id!=o.id){m.push(i[l])}}i=m}}}};$.getJSON(a.dataSource.org,{},function(n){if(n.status==0){var l=n.result;for(var m=0;m<l.length;m++){if(c.contains(l[m].id)){l[m].checked=true}}$.fn.zTree.init($("#v_com_base_org_tree"),j,l)}})};b.on("click",f)}});define("duty.view",["config"],function(a){return function(b){var c=b.data("id");var d=function(e){b.text(e)};$.getJSON(a.dataSource["duty-view"].replace("{{id}}",c),{},function(f){if(f.status==0){var e=f.result;d(e)}})}});define("config",{"clsNames":{"code":".v-com-code","account":".v-com-account","account-view":".v-com-account-view","org":".v-com-org","org-view":".v-com-org-view","org-tree":".v-com-org-tree","tree":".v-com-tree","duty-view":".v-com-duty-view"},"dataSource":{"code":basePath+"/sys/code/{{busInfo}}/{{code}}.do","account-user":basePath+"/sys/user.do?simple=true","account-account":basePath+"/sys/account.do?simple=true","account-view":basePath+"/sys/account/{{id}}.do?simple=true","org":basePath+"/sys/org.do?simple=true","org-view":basePath+"/sys/org/{{id}}.do?simple=true","duty-view":basePath+"/sys/duty/{{id}}.do"}});define("code",["config"],function(a){return function(d){var c=d.data("businfo");var f=d.data("code");var e=d.data("default");var b=function(g){$.getJSON(a.dataSource.code.replace("{{busInfo}}",c).replace("{{code}}",f),{},function(i){if(i.status==0){var h=i.result;$.each(h,function(){var j=$("<option>").val(this).html(this);if(this==e){j.attr("selected","selected")}j.appendTo(d)})}})};b()}});define("account",["config"],function(a){return function(b){var c=b.data("back");var f=window[c];var d=b.data("default");var e=function(){var g=$.dialog({title:"选择用户账户",content:"url:"+basePath+"/sys/account/select.do",width:900,max:false,min:false,height:450,ok:function(){var h=this.iwin["arrDefaultAccount"];
b.data("default",h.join(","));f(this.iwin["resultAccount"])},init:function(){if(b.data("default")!=null&&b.data("default")!=""){this.iwin["defaultAccount"]=b.data("default").split(",");this.iwin.fnLoadDefault()}}})};b.on("click",e)}});define("account.view",["config"],function(a){return function(b){var c=b.data("id");var d=function(e){b.text(e)};$.getJSON(a.dataSource["account-view"].replace("{{id}}",c),{},function(f){if(f.status==0){var e=f.result;d(e.loginName)}})}});$(function(){require(["config"],function(e){var f=$(e.clsNames.code);if(f.length>0){require(["code"],function(k){f.each(function(){var l=$(this);k(l)})})}var g=$(e.clsNames.account);if(g.length>0){require(["account"],function(k){g.each(function(){var l=$(this);k(l)})})}var d=$(e.clsNames.org);if(d.length>0){require(["org"],function(k){d.each(function(){var l=$(this);k(l)})})}var a=$(e.clsNames["account-view"]);if(a.length>0){require(["account.view"],function(k){a.each(function(){k($(this))})})}var h=$(e.clsNames["org-view"]);if(h.length>0){require(["org.view"],function(k){h.each(function(){k($(this))})})}var i=$(e.clsNames["org-tree"]);if(i.length>0){require(["org.tree"],function(k){i.each(function(){k($(this))})})}var j=$(e.clsNames["tree"]);if(j.length>0){require(["tree"],function(k){j.each(function(){k($(this))})})}var c=$(e.clsNames["duty-view"]);if(c.length>0){require(["duty.view"],function(k){c.each(function(){k($(this))})})}var b=$("form");if(b.length>0){require(["../js/jquery/jquery.form"],function(k){k()})}})});